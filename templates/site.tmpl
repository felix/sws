{{ define "content" }}
	<main>
		<header>
			{{ with .Site }}
				<h1>{{ .Name }}</h1>
				<span>{{ .Description }}</span>
			{{ end }}
		</header>
		<fig>
		{{ template "timeBarChart" .Hits }}
		</fig>

		<h2>Popular pages</h2>
		<fig>
		{{ template "barChartHorizontal" .PageSet }}
		</fig>

		<ul class="pages">
			{{ $pages := .PageSet }}
			{{ range .PageSet }}
				{{ template "pageForList" . }}
				<fig>
				{{ $pathHits := $pages.Page .Path }}
				{{ template "timeBarChart" $pathHits }}
				</fig>
			{{ end }}
		</ul>
		<h2>User Agents</h2>
		{{ if .Browsers }}
			<fig>
			{{ template "barChart" .Browsers }}
			</fig>
			<ul class="browsers">
				{{ range .Browsers }}
					{{ template "browserForList" . }}
				{{ end }}
			</ul>
		{{ else }}
			<p>No user agents</p>
		{{ end }}
	</main>
{{ end }}

{{ define "pageForList" }}
<li>
	<h4 class="path">{{ .Path }}</h4>
	<span class="title">{{ .Title }}</span>
	<span class="last-visit">{{ .LastVisitedAt|timeLong }}</span>
	<span class="count">{{ .Count }}</span>
</li>
{{ end }}

{{ define "browserForList" }}
<li>
	<h4 class="name">{{ .Name }}</h4>
	<span class="last-seen">{{ .LastSeenAt|timeLong }}</span>
	<span class="count">{{ .Count }}</span>
</li>
{{ end }}
